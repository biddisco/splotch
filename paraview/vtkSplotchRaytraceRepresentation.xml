<ServerManagerConfiguration>

  <!-- ================================================================= -->

  <ProxyGroup name="representations">

    <!-- ================================================================= -->
    <!-- Add to "GeometryRepresentation" -->
    <Extension name="GeometryRepresentation">

      <!-- this adds to what is already defined in PVRepresentationBase -->
      <RepresentationType subproxy="SplotchRaytraceRepresentation" 
                          text="Splotch particles"
                          subtype="0" /> 
      <!-- subtype 0 for the Default Geometry Representation is points -->

      <SubProxy>
        <Proxy name="SplotchRaytraceRepresentation"
          proxygroup="representations" proxyname="SplotchRaytraceRepresentation" />

        <ShareProperties subproxy="SurfaceRepresentation">
          <Exception name="Visibility" />
          <Exception name="Representation" />
        </ShareProperties>

        <InputProperty name="Input" command="SetInputConnection">
          <DataTypeDomain name="input_type">
            <DataType value="vtkPointSet"/>
          </DataTypeDomain>
          <Documentation>
            Set the input to the representation.
          </Documentation>
        </InputProperty>

        <StringVectorProperty
          name="IntensityScalars"
          command="SetIntensityScalars"
          number_of_elements="1"
          animateable="0"
          default_values="Intensity">
          <ArrayListDomain
            name="array_list"
            attribute_type="Scalars"
            none_string="Not available">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </ArrayListDomain>
          <FieldDataDomain name="field_list">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </FieldDataDomain>
        </StringVectorProperty>

        <StringVectorProperty
          name="RadiusScalars"
          command="SetInputArrayToProcess"
          number_of_elements="5"
          element_types="0 0 0 0 2"
          default_values="Radius">
          <ArrayListDomain name="array_list" attribute_type="Scalars">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </ArrayListDomain>
          <FieldDataDomain name="field_list">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </FieldDataDomain>
        </StringVectorProperty>

        <ExposedProperties>
          <Property name="IntensityScalars"/>
          <Property name="RadiusScalars"/>
        </ExposedProperties>
      </SubProxy>
    </Extension>
    
    <!-- ================================================================= -->
    <!-- Add to "GeometryRepresentation" -->
    <!-- this adds to what is already defined in PVRepresentationBase -->
    <Extension name="UnstructuredGridRepresentation">

      <RepresentationType subproxy="SplotchRaytraceRepresentation" 
                          text="Splotch particles"
                          subtype="0" />
      <SubProxy>
        <Proxy name="SplotchRaytraceRepresentation"
          proxygroup="representations" proxyname="SplotchRaytraceRepresentation" />

        <ShareProperties subproxy="SurfaceRepresentation">
          <Exception name="Visibility" />
          <Exception name="Representation" />
        </ShareProperties>

        <StringVectorProperty
          name="IntensityScalars"
          command="SetIntensityScalars"
          number_of_elements="1"
          animateable="0"
          default_values="Intensity"
          default_regex_delimiter=","
          default_regex="^[Vv][Oo][Ll][Uu][Mm][Ee]$,.*[Vv][Oo][Ll]"
          label="Intensity">
          <ArrayListDomain
            name="array_list"
            attribute_type="Scalars"
            none_string="Not available"
            input_domain_name="input_array">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </ArrayListDomain>
          <FieldDataDomain name="field_list">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </FieldDataDomain>
          <Documentation>
            This property indicates the name of the array to be used for intensities
          </Documentation>
        </StringVectorProperty>

        <StringVectorProperty
          name="RadiusScalars"
          command="SetInputArrayToProcess"
          number_of_elements="5"
          element_types="0 0 0 0 2"
          default_values="Radius">
          <ArrayListDomain name="array_list" attribute_type="Scalars">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </ArrayListDomain>
          <FieldDataDomain name="field_list">
            <RequiredProperties>
              <Property name="Input" function="Input"/>
            </RequiredProperties>
          </FieldDataDomain>
        </StringVectorProperty>

        <ExposedProperties>
          <Property name="IntensityScalars"/>
          <Property name="RadiusScalars"/>
        </ExposedProperties>
      </SubProxy>
    </Extension>

    <!-- ================================================================= -->
    <RepresentationProxy name="SplotchRaytraceRepresentation"    
                           base_proxygroup="representations"      
                           base_proxyname="SurfaceRepresentationBase"      
                           class="vtkSplotchRaytraceRepresentation"      
                           processes="client|dataserver|renderserver" >

      <Documentation>
        Representation for Particle or Point Data.
      </Documentation>

      <InputProperty name="Input" command="SetInputConnection">
        <DataTypeDomain name="input_type">
          <DataType value="vtkPointSet"/>
        </DataTypeDomain>
        <InputArrayDomain name="input_array" attribute_type="point">
        </InputArrayDomain>
      </InputProperty>

      <StringVectorProperty
        name="IntensityScalars"
        command="SetIntensityScalars"
        number_of_elements="1"
        animateable="0"
        default_values="Intensity"
        default_regex_delimiter=","
        default_regex="^[Vv][Oo][Ll][Uu][Mm][Ee]$,.*[Vv][Oo][Ll]"
        label="Intensity">
        <ArrayListDomain
          name="array_list"
          attribute_type="Scalars"
          none_string="Not available"
          input_domain_name="input_array">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </ArrayListDomain>
        <FieldDataDomain name="field_list">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </FieldDataDomain>
        <Documentation>
          This property indicates the name of the array to be used for intensities
        </Documentation>
      </StringVectorProperty>

      <StringVectorProperty
        name="RadiusScalars"
        command="SetInputArrayToProcess"
        number_of_elements="5"
        element_types="0 0 0 0 2"
        default_values="Radius">
        <ArrayListDomain name="array_list" attribute_type="Scalars">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </ArrayListDomain>
        <FieldDataDomain name="field_list">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </FieldDataDomain>
      </StringVectorProperty>

      <ExposedProperties>
        <Property name="IntensityScalars"/>
        <Property name="RadiusScalars"/>
      </ExposedProperties>
    </RepresentationProxy>

  </ProxyGroup>
</ServerManagerConfiguration>
