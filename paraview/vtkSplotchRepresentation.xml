<ServerManagerConfiguration>

  <!-- ================================================================= -->

  <ProxyGroup name="representations">

    <!-- ================================================================= -->
    <!-- Add to "GeometryRepresentation" -->
    <Extension name="GeometryRepresentation">

      <!-- this adds to what is already defined in PVRepresentationBase -->
      <RepresentationType subproxy="SplotchRepresentation" 
                          text="Splotch particles"
                          subtype="Points" />

      <SubProxy>
        <Proxy name="SplotchRepresentation"
               proxygroup="representations" 
               proxyname="SplotchRepresentation" />

        <ShareProperties subproxy="SurfaceRepresentation">
          <Exception name="Input" />
          <Exception name="Visibility" />
          <Exception name="Representation" />
        </ShareProperties>

        <ExposedProperties>
          <PropertyGroup label="Data Structure" >
            <Property name="TypeActive"/>
            <Property name="ActiveParticleType"/>
            <Property name="ActiveParticleSettings"/>
            <Property name="IntensityScalars"/>
            <Property name="RadiusScalars"/>
            <Property name="TypeScalars"/> 
          </PropertyGroup>
          <PropertyGroup label="Preprocessing" >
            <Property name="GrayAbsorption"/>
            <Property name="LogIntensity"/>
          </PropertyGroup>
          <PropertyGroup label="Render Parameters" >
            <Property name="EnableCUDA"/> 
            <Property name="Brightness"/>
            <Property name="RadiusMultiplier"/>
            <Property name="MaxRadius"/>
            <!--Property name="LODMIP"/-->
            <Property name="BrightnessLOD"/>         
          </PropertyGroup>
        </ExposedProperties>
      </SubProxy>
    </Extension>
    
    <!-- ================================================================= -->
    <!-- Add to "GeometryRepresentation" -->
    <!-- this adds to what is already defined in PVRepresentationBase -->
    <Extension name="UnstructuredGridRepresentation">

      <!-- this adds to what is already defined in PVRepresentationBase -->
      <RepresentationType subproxy="SplotchRepresentation"
                          text="Splotch particles"
                          subtype="Points" />

      <SubProxy>
        <Proxy name="SplotchRepresentation"
               proxygroup="representations" 
               proxyname="SplotchRepresentation" />

        <ShareProperties subproxy="SurfaceRepresentation">
          <Exception name="Input" />
          <Exception name="Visibility" />
          <Exception name="Representation" />
        </ShareProperties>

        <ExposedProperties>
          <PropertyGroup label="Data Structure" >
            <Property name="TypeActive"/>
            <Property name="ActiveParticleType"/>
            <Property name="ActiveParticleSettings"/>
            <Property name="IntensityScalars"/>
            <Property name="RadiusScalars"/>
            <Property name="TypeScalars"/> 
          </PropertyGroup>
          <PropertyGroup label="Preprocessing" >
            <Property name="GrayAbsorption"/>
            <Property name="LogIntensity"/>
          </PropertyGroup>
          <PropertyGroup label="Render Parameters" >
            <Property name="EnableCUDA"/> 
            <Property name="Brightness"/>
            <Property name="RadiusMultiplier"/>
            <Property name="MaxRadius"/>
            <!--Property name="LODMIP"/-->
            <Property name="BrightnessLOD"/>         
          </PropertyGroup>
        </ExposedProperties>
      </SubProxy>
    </Extension>

    <!-- ================================================================= -->
    <RepresentationProxy name="SplotchRepresentation"    
                         base_proxygroup="representations"      
                         base_proxyname="SurfaceRepresentationBase"      
                         class="vtkSplotchRepresentation"      
                         processes="client|dataserver|renderserver" >

      <Documentation>
        Representation for Particle or Point Data.
      </Documentation>
      
      <!-- Properties relating to data structure -->
      <InputProperty name="Input" command="SetInputConnection">
        <DataTypeDomain name="input_type">
          <DataType value="vtkPointSet"/>
        </DataTypeDomain>
        <InputArrayDomain 
          name="input_array" 
          attribute_type="point">
        </InputArrayDomain>
      </InputProperty>
      
      <IntVectorProperty name="TypeActive"
        command="SetTypeActive"
        number_of_elements="1"
        default_values="1">
        <BooleanDomain name="bool"/>
      </IntVectorProperty>

      <IntVectorProperty name="ActiveParticleType"
        command="SetActiveParticleType"
        number_of_elements="1"
        default_values="0">
      </IntVectorProperty>-->

      <StringVectorProperty
         name="ActiveParticleSettings"
         command="GetActiveParticleSettings"
         information_only="1">
        <StringArrayHelper/>
      </StringVectorProperty>

      <StringVectorProperty
        name="IntensityScalars"
        command="SetIntensityScalars"
        number_of_elements="1"
        animateable="0"
        default_values="Intensity"
        default_regex_delimiter=","
        default_regex="^[Ii]ntensity,SmoothedDensity"
        label="Intensity Array">
        <ArrayListDomain 
          name="array_list" 
          attribute_type="Scalars"
          none_string="Not available"
          input_domain_name="input_array">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </ArrayListDomain>
      </StringVectorProperty>

      <StringVectorProperty
        name="RadiusScalars"
        command="SetRadiusScalars"
        number_of_elements="1"
        animateable="0"
        default_values="Radius"
        default_regex_delimiter=","
        default_regex="^[Rr]adius,SmoothedRadius"
        label="Radius Array">
        <ArrayListDomain 
          name="array_list" 
          attribute_type="Scalars"
          none_string="Not available"
          input_domain_name="input_array">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </ArrayListDomain>
      </StringVectorProperty>

      <StringVectorProperty
        name="TypeScalars"
        command="SetTypeScalars"
        number_of_elements="1"
        animateable="0"
        default_values="Type"
        default_regex_delimiter=","
        default_regex="^[Tt]ype"
        label="Type Array">
        <ArrayListDomain
          name="array_list"
          attribute_type="Scalars"
          none_string="Not available"
          input_domain_name="input_array">
          <RequiredProperties>
            <Property name="Input" function="Input"/>
          </RequiredProperties>
        </ArrayListDomain>
      </StringVectorProperty>

       <!-- Properties relating to data preprocessing -->
      <DoubleVectorProperty name="GrayAbsorption"
        command="SetGrayAbsorption"
        number_of_elements="1"
        default_values="-400">
        <DoubleRangeDomain name="range" min="-500" max="0"/>
        <Documentation>
          The value passed to the mapper is 10^(GrayAbsorption/100)
        </Documentation>
      </DoubleVectorProperty>

      <IntVectorProperty name="LogIntensity"
        command="SetLogIntensity"
        number_of_elements="1"
        default_values="0">
        <BooleanDomain name="bool"/>
      </IntVectorProperty>

      <!-- Properties relating to render parameters -->
      <IntVectorProperty
         name="EnableCUDA"
         command="SetEnableCUDA"
         number_of_elements="1"
         default_values="0" >
        <BooleanDomain name="bool"/>
      </IntVectorProperty>

      <DoubleVectorProperty name="Brightness"
        command="SetBrightness"
        number_of_elements="1"
        default_values="200">
        <DoubleRangeDomain name="range" min="-500" max="500"/>
        <Documentation>
          The value passed to the mapper is 10^(Brightness/100)
        </Documentation>
      </DoubleVectorProperty>

      <DoubleVectorProperty name="BrightnessLOD"
        command="SetBrightnessLOD"
        number_of_elements="1"
        default_values="200">
        <DoubleRangeDomain name="range" min="-500" max="500"/>
        <Documentation>
          The value passed to the mapper is 10^(Brightness/100)
        </Documentation>
      </DoubleVectorProperty>

      <DoubleVectorProperty name="RadiusMultiplier"
        command="SetRadiusMultiplier"
        number_of_elements="1"
        default_values="0">
        <!--DoubleRangeDomain name="range" min="-100" max="100"/-->
      </DoubleVectorProperty>

      <DoubleVectorProperty name="MaxRadius"
        command="SetMaxRadius"
        number_of_elements="1"
        default_values="0">
        <!--DoubleRangeDomain name="range" min="0" max="100"/-->
        <Documentation>
          0 indicates no maximum
        </Documentation>
      </DoubleVectorProperty>

      <!--IntVectorProperty name="LODMIP"
        command="SetLODMIP"
        number_of_elements="1"
        default_values="0">
        <BooleanDomain name="bool"/>
      </IntVectorProperty-->

    </RepresentationProxy>

  </ProxyGroup>
</ServerManagerConfiguration>
